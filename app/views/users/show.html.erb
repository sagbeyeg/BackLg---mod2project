<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
  <a href="<%= root_path %>">Home</a>
  <a href="<%= edit_user_path %>">Edit Profile</a>
  <a href="<%= games_path %>">Add Game</a>
</div>

<span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776; </span>
<script>
function openNav() {
  document.getElementById("mySidenav").style.width = "250px";
  document.getElementById("main").style.marginLeft = "250px";
}

/* Set the width of the side navigation to 0 and the left margin of the page content to 0 */
function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
  document.getElementById("main").style.marginLeft = "0";
}
</script>

<div id="main">    
    <div class="text-center">
        <h1><%= "#{@user.name.split.map(&:capitalize).join(' ')}'s Games"%></h1>
        <%=button_to "Edit Profile", edit_user_path(@user), method: :get%>
    </div>

    <h3>My Games:</h3>

    <div class="form">
    <%= form_tag( "/users/#{@user.id}", :method => :get )  do %>
        <% game_lists = @user.game_lists.map{|list,games| list}%>
        <%= select_tag "game_list", options_for_select(game_lists), prompt: "Select System"%>
        <%= hidden_field_tag "id", @user.id%>
        <%= submit_tag "Filter"%>
    <% end %>
    <%= button_to "Clear Filter", user_path(@user), id: @user.id, method: :get%>
    </div>

    <%if params[:game_list]%>
        <p><%= params[:game_list]%> Games</p>
    <%end%>

    <div class="container my-4">
        <div class="row">
            <% @user_games.each do |game|%>
                    <div class="col-lg-4 col-md-12 mb-4">
                        <%= image_tag  "#{game.image_url}" %>
                        <%=link_to  "#{game.name}", game_path(game) %>
                        <%= button_to "Add/Edit Review", edit_review_path(Review.find_by(user_id: @user.id, game_id: game.id)), method: :get%>
                    </div>
            <% end %>
        </div>
    </div>
            
    <h3>My Systems:</h3>

    <div class="container my-4">
        <div class="row">
            <% @user.systems.each do |sys|%>
                <div class="col-md-3" style="margin-bottom:15px;">
                    <div id="sys_card"class="card h-100 bg-dark text-white">
                        <img id="sys_pic"class="card-img" src=<%= sys.image_url %> alt="Card image">
                        <div class="card-img-overlay align-bottom">
                            <%= link_to  sys.name, system_path(sys) %>
                        </div>
                    </div>
                </div>
            <% end%>
        </div>
    </div>

    
    <h3 class="text-center">My Reviews</h3>
    <div class="align-items-center">
        
        <% @user.reviews.each do |review|%>
                <% if review.title != nil && review.description != nil%>
                    <div class="card review_card shadow" style="width: 45rem;">
                        <div class="card-body">
                            <h5 class="card-title"><%= review.game.name %></h5>
                            <hr>
                            <h6 class="card-subtitle mb-2 text"><%= review.title %></h6>
                            <p class="card-text"><%= review.description %></p>
                        </div>
                    </div>
                </div>
            <% end %>
        <% end%>
    </div>
     
    
</div>